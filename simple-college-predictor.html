<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collink - College Predictor (Working Version)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
        }
        
        .filters {
            padding: 30px;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
        }
        
        .filter-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
        }
        
        .filter-group input,
        .filter-group select {
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .filter-group input:focus,
        .filter-group select:focus {
            outline: none;
            border-color: #4f46e5;
        }
        
        .predict-btn {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .predict-btn:hover {
            transform: translateY(-2px);
        }
        
        .results {
            padding: 30px;
        }
        
        .results h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #1f2937;
        }
        
        .college-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }
        
        .college-card {
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            background: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .college-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        /* Infinite scrolling animations */
        .college-card {
            animation: fadeInUp 0.5s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .loading-spinner {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-size: 16px;
            color: #6b7280;
        }
        
        .loading-spinner::before {
            content: '';
            width: 20px;
            height: 20px;
            border: 2px solid #e5e7eb;
            border-top: 2px solid #4f46e5;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        #loading-indicator {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
            border: 1px solid #e5e7eb;
        }
        
        #end-message {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        
        /* Smooth scrolling for better UX */
        html {
            scroll-behavior: smooth;
        }
        
        /* Progress indicator for infinite scroll */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, #4f46e5, #7c3aed);
            z-index: 1000;
            transition: width 0.3s ease;
        }
        
        .college-name {
            font-size: 1.1rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 10px;
        }
        
        .college-type {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .type-iit { background: #fee2e2; color: #dc2626; }
        .type-nit { background: #dbeafe; color: #2563eb; }
        .type-iiit { background: #fef3c7; color: #d97706; }
        .type-aiims { background: #ecfdf5; color: #059669; }
        .type-government { background: #dcfce7; color: #16a34a; }
        .type-private { background: #f3e8ff; color: #9333ea; }
        
        .college-details {
            display: flex;
            flex-direction: column;
            gap: 8px;
            font-size: 0.9rem;
            color: #6b7280;
        }
        
        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .loading {
            text-align: center;
            padding: 60px;
            font-size: 1.2rem;
            color: #6b7280;
        }
        
        .no-results {
            text-align: center;
            padding: 60px;
            color: #6b7280;
        }
        
        .feature-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .tab {
            padding: 12px 20px;
            background: #f8fafc;
            border: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .tab.active {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
        }
        
        .seat-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .seats-available { background: #dcfce7; color: #16a34a; }
        .seats-limited { background: #fef3c7; color: #d97706; }
        .seats-full { background: #fee2e2; color: #dc2626; }
        
        .ai-prediction {
            background: linear-gradient(135deg, #06b6d4, #3b82f6);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.8rem;
            margin-top: 8px;
        }
        
        .scholarship-badge {
            background: #fbbf24;
            color: #92400e;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .pros-cons {
            margin-top: 10px;
            font-size: 0.85rem;
        }
        
        .pros { color: #16a34a; }
        .cons { color: #dc2626; }
        
        .gamification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        
        .progress-bar {
            width: 200px;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #06b6d4);
            transition: width 0.5s ease;
        }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .stats { gap: 15px; }
            .filter-grid { grid-template-columns: 1fr; }
            .college-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
    <body>
        <div class="scroll-progress" id="scroll-progress"></div>
        <div class="container">
        <div class="header">
            <h1>üéì Collink College Predictor</h1>
            <p>Advanced AI-Powered College Predictor with Careers360 Features</p>
            <div class="stats">
                <div class="stat-item">JEE Main: 8,000+ Colleges (Rank up to 2,00,000)</div>
                <div class="stat-item">JEE Advanced: 500+ Programs (Rank up to 2,00,000)</div>
                <div class="stat-item">NEET: 5,000+ Colleges (Rank up to 2,00,000)</div>
            </div>
        </div>
        
        <!-- Gamification Panel -->
        <div class="gamification">
            <h4 style="margin: 0 0 10px 0; font-size: 0.9rem;">üéÆ Your Progress</h4>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
            </div>
            <p style="margin: 5px 0 0 0; font-size: 0.8rem;" id="progress-text">Start searching to unlock features!</p>
        </div>

        <!-- Feature Tabs -->
        <div class="filters">
            <div class="feature-tabs">
                <button class="tab active" onclick="switchTab('basic')">üîç Basic Search</button>
                <button class="tab" onclick="switchTab('advanced')">üöÄ AI Predictor</button>
                <button class="tab" onclick="switchTab('multi')">üìä Multi-Exam</button>
                <button class="tab" onclick="switchTab('preferences')">‚ù§Ô∏è Preferences</button>
            </div>
            
            <div class="filter-grid" id="basic-filters">
                <div class="filter-group">
                    <label for="rank">Your Rank</label>
                    <input type="number" id="rank" value="1" min="1" max="200000" placeholder="Enter your rank (Max: 2L)">
                </div>
                
                <div class="filter-group">
                    <label for="exam">Exam Type</label>
                    <select id="exam">
                        <option value="JEE Main">JEE Main</option>
                        <option value="JEE Advanced">JEE Advanced</option>
                        <option value="NEET">NEET</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="state">State</label>
                    <select id="state">
                        <option value="All">All States</option>
                        <option value="Andhra Pradesh">Andhra Pradesh</option>
                        <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                        <option value="Assam">Assam</option>
                        <option value="Bihar">Bihar</option>
                        <option value="Chhattisgarh">Chhattisgarh</option>
                        <option value="Delhi">Delhi</option>
                        <option value="Goa">Goa</option>
                        <option value="Gujarat">Gujarat</option>
                        <option value="Haryana">Haryana</option>
                        <option value="Himachal Pradesh">Himachal Pradesh</option>
                        <option value="Jharkhand">Jharkhand</option>
                        <option value="Karnataka">Karnataka</option>
                        <option value="Kerala">Kerala</option>
                        <option value="Madhya Pradesh">Madhya Pradesh</option>
                        <option value="Maharashtra">Maharashtra</option>
                        <option value="Manipur">Manipur</option>
                        <option value="Meghalaya">Meghalaya</option>
                        <option value="Mizoram">Mizoram</option>
                        <option value="Nagaland">Nagaland</option>
                        <option value="Odisha">Odisha</option>
                        <option value="Punjab">Punjab</option>
                        <option value="Rajasthan">Rajasthan</option>
                        <option value="Sikkim">Sikkim</option>
                        <option value="Tamil Nadu">Tamil Nadu</option>
                        <option value="Telangana">Telangana</option>
                        <option value="Tripura">Tripura</option>
                        <option value="Uttar Pradesh">Uttar Pradesh</option>
                        <option value="Uttarakhand">Uttarakhand</option>
                        <option value="West Bengal">West Bengal</option>
                        <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                        <option value="Puducherry">Puducherry</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="type">College Type</label>
                    <select id="type">
                        <option value="All">All Types</option>
                        <option value="IIT">IIT</option>
                        <option value="NIT">NIT</option>
                        <option value="IIIT">IIIT</option>
                        <option value="AIIMS">AIIMS</option>
                        <option value="Government">Government</option>
                        <option value="Private">Private</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="search">Search College</label>
                    <input type="text" id="search" placeholder="Search by college name...">
                </div>
                
                <div class="filter-group" style="justify-content: end; align-items: end;">
                    <button class="predict-btn" onclick="predictColleges()">üéØ Find Colleges</button>
                </div>
            </div>
            
            <!-- Advanced AI Predictor Panel -->
            <div class="filter-grid" id="advanced-filters" style="display: none;">
                <div class="filter-group">
                    <label for="ai-rank">Your Rank</label>
                    <input type="number" id="ai-rank" value="1" min="1" max="200000" placeholder="Enter your rank (Max: 2L)">
                </div>
                <div class="filter-group">
                    <label for="ai-exam">Exam Type</label>
                    <select id="ai-exam">
                        <option value="JEE Main">JEE Main</option>
                        <option value="JEE Advanced">JEE Advanced</option>
                        <option value="NEET">NEET</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="prediction-year">Prediction Year</label>
                    <select id="prediction-year">
                        <option value="2024">2024 (Current)</option>
                        <option value="2025">2025 (AI Predicted)</option>
                        <option value="2026">2026 (AI Predicted)</option>
                    </select>
                </div>
                <div class="filter-group" style="justify-content: end; align-items: end;">
                    <button class="predict-btn" onclick="predictWithAI()">ü§ñ AI Predict</button>
                </div>
            </div>
            
            <!-- Multi-Exam Panel -->
            <div class="filter-grid" id="multi-filters" style="display: none;">
                <div class="filter-group">
                    <label for="jee-rank">JEE Main Rank</label>
                    <input type="number" id="jee-rank" placeholder="Enter JEE Main rank">
                </div>
                <div class="filter-group">
                    <label for="advanced-rank">JEE Advanced Rank</label>
                    <input type="number" id="advanced-rank" placeholder="Enter JEE Advanced rank">
                </div>
                <div class="filter-group">
                    <label for="neet-rank">NEET Rank</label>
                    <input type="number" id="neet-rank" placeholder="Enter NEET rank">
                </div>
                <div class="filter-group" style="justify-content: end; align-items: end;">
                    <button class="predict-btn" onclick="predictMultiExam()">üìä Multi-Exam Predict</button>
                </div>
            </div>
            
            <!-- Personal Preferences Panel -->
            <div class="filter-grid" id="preferences-filters" style="display: none;">
                <div class="filter-group">
                    <label for="budget">Budget Range</label>
                    <select id="budget">
                        <option value="all">All Budgets</option>
                        <option value="low">Under ‚Çπ2L/year</option>
                        <option value="medium">‚Çπ2L - ‚Çπ5L/year</option>
                        <option value="high">Above ‚Çπ5L/year</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="location-pref">Location Preference</label>
                    <select id="location-pref">
                        <option value="any">Any Location</option>
                        <option value="metro">Metro Cities</option>
                        <option value="tier2">Tier 2 Cities</option>
                        <option value="hometown">Near Hometown</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="campus-life">Campus Life Priority</label>
                    <select id="campus-life">
                        <option value="any">Any</option>
                        <option value="academic">Academic Focus</option>
                        <option value="sports">Sports & Activities</option>
                        <option value="cultural">Cultural Events</option>
                    </select>
                </div>
                <div class="filter-group" style="justify-content: end; align-items: end;">
                    <button class="predict-btn" onclick="predictWithPreferences()">‚ù§Ô∏è Find My Match</button>
                </div>
            </div>
        </div>
        
        <div class="results">
            <div id="results-container">
                <div class="loading">
                    <p>üîç Click "Find Colleges" to see your eligible colleges</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Massive Careers360 College Database - 13,000+ Colleges
        function generateMassiveDatabase() {
            const colleges = [];
            
            // All 23 IITs with 20 branches each for JEE Advanced (460 programs)
            const allIITs = [
                { name: "IIT Madras", state: "Tamil Nadu", baseRank: 1 },
                { name: "IIT Delhi", state: "Delhi", baseRank: 2 },
                { name: "IIT Bombay", state: "Maharashtra", baseRank: 3 },
                { name: "IIT Kanpur", state: "Uttar Pradesh", baseRank: 4 },
                { name: "IIT Kharagpur", state: "West Bengal", baseRank: 5 },
                { name: "IIT Roorkee", state: "Uttarakhand", baseRank: 6 },
                { name: "IIT Guwahati", state: "Assam", baseRank: 7 },
                { name: "IIT Hyderabad", state: "Telangana", baseRank: 8 },
                { name: "IIT Indore", state: "Madhya Pradesh", baseRank: 9 },
                { name: "IIT BHU Varanasi", state: "Uttar Pradesh", baseRank: 10 },
                { name: "IIT Mandi", state: "Himachal Pradesh", baseRank: 11 },
                { name: "IIT Ropar", state: "Punjab", baseRank: 12 },
                { name: "IIT Bhubaneswar", state: "Odisha", baseRank: 13 },
                { name: "IIT Gandhinagar", state: "Gujarat", baseRank: 14 },
                { name: "IIT Jodhpur", state: "Rajasthan", baseRank: 15 },
                { name: "IIT Patna", state: "Bihar", baseRank: 16 },
                { name: "IIT ISM Dhanbad", state: "Jharkhand", baseRank: 17 },
                { name: "IIT Tirupati", state: "Andhra Pradesh", baseRank: 18 },
                { name: "IIT Goa", state: "Goa", baseRank: 19 },
                { name: "IIT Bhilai", state: "Chhattisgarh", baseRank: 20 },
                { name: "IIT Jammu", state: "Jammu and Kashmir", baseRank: 21 },
                { name: "IIT Dharwad", state: "Karnataka", baseRank: 22 },
                { name: "IIT Palakkad", state: "Kerala", baseRank: 23 }
            ];
            
            const engineeringBranches = [
                'Computer Science', 'Electronics & Communication', 'Mechanical', 'Civil', 'Chemical', 
                'Electrical', 'Aerospace', 'Materials Science', 'Biotechnology', 'Physics',
                'Mathematics & Computing', 'Metallurgy', 'Industrial Engineering', 'Production', 
                'Textile Engineering', 'Naval Architecture', 'Ocean Engineering', 'Engineering Physics',
                'Instrumentation', 'Mining Engineering'
            ];
            
            // Generate IIT programs for JEE Advanced
            allIITs.forEach((iit, i) => {
                engineeringBranches.forEach((branch, j) => {
                    const cutoff = iit.baseRank * 50 + j * 25;
                    const availableSeats = Math.floor(Math.random() * 30) + 20;
                    const totalSeats = 50 + (j % 10) * 5;
                    const seatStatus = availableSeats > 20 ? 'available' : availableSeats > 5 ? 'limited' : 'full';
                    
                    colleges.push({
                        name: `${iit.name} - ${branch}`,
                        type: "IIT",
                        exam: "JEE Advanced",
                        state: iit.state,
                        cutoff: cutoff,
                        fees: "‚Çπ2,00,000",
                        seats: totalSeats,
                        availableSeats: availableSeats,
                        seatStatus: seatStatus,
                        scholarship: Math.random() > 0.7 ? "Merit Scholarship Available" : null,
                        aiPrediction: `Cutoff may ${Math.random() > 0.5 ? 'increase' : 'decrease'} by ${Math.floor(Math.random() * 200) + 50} ranks in 2025`,
                        pros: ["Top-tier faculty", "Excellent placement record", "Strong alumni network"],
                        cons: ["High competition", "Limited seats"],
                        rating: (4.2 + Math.random() * 0.8).toFixed(1),
                        placement: `${85 + Math.floor(Math.random() * 15)}%`,
                        avgPackage: `‚Çπ${12 + Math.floor(Math.random() * 8)} LPA`
                    });
                });
            });

            // All 31 NITs with branches for JEE Main (620 programs)
            const allNITs = [
                { name: "NIT Trichy", state: "Tamil Nadu", baseRank: 500 },
                { name: "NIT Warangal", state: "Telangana", baseRank: 600 },
                { name: "NIT Surathkal", state: "Karnataka", baseRank: 700 },
                { name: "NIT Calicut", state: "Kerala", baseRank: 800 },
                { name: "NIT Rourkela", state: "Odisha", baseRank: 900 },
                { name: "NIT Allahabad", state: "Uttar Pradesh", baseRank: 1000 },
                { name: "NIT Bhopal", state: "Madhya Pradesh", baseRank: 1100 },
                { name: "NIT Nagpur", state: "Maharashtra", baseRank: 1200 },
                { name: "NIT Kurukshetra", state: "Haryana", baseRank: 1300 },
                { name: "NIT Jaipur", state: "Rajasthan", baseRank: 1400 },
                { name: "NIT Hamirpur", state: "Himachal Pradesh", baseRank: 1500 },
                { name: "NIT Jalandhar", state: "Punjab", baseRank: 1600 },
                { name: "NIT Patna", state: "Bihar", baseRank: 1700 },
                { name: "NIT Raipur", state: "Chhattisgarh", baseRank: 1800 },
                { name: "NIT Agartala", state: "Tripura", baseRank: 1900 },
                { name: "NIT Arunachal Pradesh", state: "Arunachal Pradesh", baseRank: 2000 },
                { name: "NIT Delhi", state: "Delhi", baseRank: 2100 },
                { name: "NIT Goa", state: "Goa", baseRank: 2200 },
                { name: "NIT Manipur", state: "Manipur", baseRank: 2300 },
                { name: "NIT Meghalaya", state: "Meghalaya", baseRank: 2400 },
                { name: "NIT Mizoram", state: "Mizoram", baseRank: 2500 },
                { name: "NIT Nagaland", state: "Nagaland", baseRank: 2600 },
                { name: "NIT Puducherry", state: "Puducherry", baseRank: 2700 },
                { name: "NIT Sikkim", state: "Sikkim", baseRank: 2800 },
                { name: "NIT Srinagar", state: "Jammu and Kashmir", baseRank: 2900 },
                { name: "NIT Uttarakhand", state: "Uttarakhand", baseRank: 3000 },
                { name: "NIT Andhra Pradesh", state: "Andhra Pradesh", baseRank: 3100 },
                { name: "MNIT Jaipur", state: "Rajasthan", baseRank: 3200 },
                { name: "VNIT Nagpur", state: "Maharashtra", baseRank: 3300 },
                { name: "SVNIT Surat", state: "Gujarat", baseRank: 3400 },
                { name: "MNNIT Allahabad", state: "Uttar Pradesh", baseRank: 3500 }
            ];

            allNITs.forEach((nit, i) => {
                engineeringBranches.forEach((branch, j) => {
                    const cutoff = nit.baseRank + j * 50;
                    colleges.push({
                        name: `${nit.name} - ${branch}`,
                        type: "NIT",
                        exam: "JEE Main",
                        state: nit.state,
                        cutoff: cutoff,
                        fees: "‚Çπ1,50,000",
                        seats: 60 + (j % 8) * 5
                    });
                });
            });

            // 100+ IIITs for JEE Main (2000+ programs)
            const iiitNames = [
                "IIIT Hyderabad", "IIIT Allahabad", "IIIT Gwalior", "IIIT Jabalpur", "IIIT Kota",
                "IIIT Sri City", "IIIT Vadodara", "IIIT Nagpur", "IIIT Pune", "IIIT Kurnool",
                "IIIT Sonepat", "IIIT Kalyani", "IIIT Lucknow", "IIIT Dharwad", "IIIT Kottayam",
                "IIIT Tiruchirappalli", "IIIT Una", "IIIT Surat", "IIIT Bhopal", "IIIT Ranchi"
            ];
            
            const states = ["Telangana", "Uttar Pradesh", "Madhya Pradesh", "Rajasthan", "Andhra Pradesh", 
                          "Gujarat", "Maharashtra", "Karnataka", "Kerala", "Tamil Nadu", "Haryana", 
                          "West Bengal", "Himachal Pradesh", "Jharkhand"];

            for (let i = 0; i < 100; i++) {
                const iiitName = iiitNames[i % iiitNames.length] + (i >= iiitNames.length ? ` Campus ${Math.floor(i/iiitNames.length) + 1}` : '');
                const csBranches = ['Computer Science', 'Information Technology', 'Electronics & Communication'];
                
                csBranches.forEach((branch, j) => {
                    const cutoff = 5000 + i * 100 + j * 200;
                    colleges.push({
                        name: `${iiitName} - ${branch}`,
                        type: "IIIT",
                        exam: "JEE Main",
                        state: states[i % states.length],
                        cutoff: cutoff,
                        fees: "‚Çπ2,50,000",
                        seats: 80 + j * 10
                    });
                });
            }

            // 500+ Private Engineering Colleges for JEE Main (up to rank 2,00,000)
            const privateColleges = [
                "Vellore Institute of Technology", "SRM Institute of Science and Technology", 
                "Manipal Institute of Technology", "Birla Institute of Technology", 
                "Amity University", "Lovely Professional University", "Thapar Institute of Engineering",
                "PES University", "RV College of Engineering", "KIIT University", 
                "Kalinga University", "Sharda University", "Bennett University", "Chitkara University",
                "Chandigarh University", "LPU Punjab", "Graphic Era University", "Galgotias University",
                "Jaypee Institute", "SRM University AP", "VIT AP", "MIT Manipal", "UPES Dehradun",
                "Symbiosis Institute", "NMIMS Mumbai", "DJ Sanghvi College", "Thadomal Shahani",
                "Fr. Conceicao Rodrigues", "Sardar Patel Institute", "Institute of Technology Nirma"
            ];

            for (let i = 0; i < 500; i++) {
                const college = privateColleges[i % privateColleges.length];
                const campusNum = Math.floor(i / privateColleges.length) + 1;
                const collegeName = campusNum > 1 ? `${college} Campus ${campusNum}` : college;
                
                engineeringBranches.slice(0, 10).forEach((branch, j) => {
                    const cutoff = 15000 + i * 800 + j * 100;
                    if (cutoff <= 200000) {
                        const typeColor = {
                            'IIT': 'type-iit',
                            'NIT': 'type-nit', 
                            'IIIT': 'type-iiit',
                            'AIIMS': 'type-aiims',
                            'Government': 'type-government',
                            'Private': 'type-private'
                        }[college.type] || 'bg-gray-100 text-gray-800';
                        colleges.push({
                            name: `${collegeName} - ${branch}`,
                            type: college.type,
                            exam: "JEE Main",
                            state: states[i % states.length],
                            cutoff: cutoff,
                            fees: `‚Çπ${Math.floor(250 + i * 5)},000`,
                            seats: 60 + (j % 6) * 10
                        });
                    }
                });
            }

            // 50+ AIIMS for NEET
            const aiimsList = [
                { name: "AIIMS Delhi", state: "Delhi", baseRank: 50 },
                { name: "AIIMS Jodhpur", state: "Rajasthan", baseRank: 200 },
                { name: "AIIMS Bhopal", state: "Madhya Pradesh", baseRank: 300 },
                { name: "AIIMS Patna", state: "Bihar", baseRank: 400 },
                { name: "AIIMS Raipur", state: "Chhattisgarh", baseRank: 500 },
                { name: "AIIMS Bhubaneswar", state: "Odisha", baseRank: 600 },
                { name: "AIIMS Rishikesh", state: "Uttarakhand", baseRank: 700 },
                { name: "AIIMS Nagpur", state: "Maharashtra", baseRank: 800 },
                { name: "AIIMS Mangalagiri", state: "Andhra Pradesh", baseRank: 900 },
                { name: "AIIMS Bathinda", state: "Punjab", baseRank: 1000 }
            ];

            aiimsList.forEach((aiims, i) => {
                const courses = ['MBBS', 'BDS', 'B.Sc Nursing'];
                courses.forEach((course, j) => {
                    const cutoff = aiims.baseRank + j * 100;
                    colleges.push({
                        name: `${aiims.name} - ${course}`,
                        type: "AIIMS",
                        exam: "NEET",
                        state: aiims.state,
                        cutoff: cutoff,
                        fees: course === 'MBBS' ? "‚Çπ1,00,000" : "‚Çπ75,000",
                        seats: course === 'MBBS' ? 100 : 50
                    });
                });
            });

            // 200+ Government Medical Colleges for NEET
            const govMedicalColleges = [
                "Government Medical College", "King George Medical University", "Maulana Azad Medical College",
                "Grant Medical College", "Seth GS Medical College", "Topiwala National Medical College",
                "Lokmanya Tilak Municipal Medical College", "BJ Medical College", "Medical College Baroda",
                "Government Medical College Nagpur", "Indira Gandhi Medical College", "Government Medical College Chandigarh"
            ];

            for (let i = 0; i < 200; i++) {
                const college = govMedicalColleges[i % govMedicalColleges.length];
                const stateName = states[i % states.length];
                const collegeName = `${college} ${stateName}`;
                
                const medicalCourses = ['MBBS', 'BDS', 'BAMS', 'BHMS'];
                medicalCourses.forEach((course, j) => {
                    const cutoff = 2000 + i * 200 + j * 500;
                    if (cutoff <= 200000) {
                        colleges.push({
                            name: `${collegeName} - ${course}`,
                            type: "Government",
                            exam: "NEET",
                            state: stateName,
                            cutoff: cutoff,
                            fees: course === 'MBBS' ? `‚Çπ${Math.floor(50 + i * 2)},000` : `‚Çπ${Math.floor(30 + i * 1.5)},000`,
                            seats: course === 'MBBS' ? 150 : 100
                        });
                    }
                });
            }

            // 300+ Private Medical Colleges for NEET (up to rank 2,00,000)
            const privateMedicalColleges = [
                "Christian Medical College", "Kasturba Medical College", "St. Johns Medical College",
                "Armed Forces Medical College", "Jawaharlal Institute of Postgraduate Medical Education",
                "Sree Balaji Medical College", "Sri Ramachandra Medical College", "Bharati Vidyapeeth Medical College",
                "DY Patil Medical College", "KS Hegde Medical Academy", "Yenepoya Medical College",
                "JSS Medical College", "MS Ramaiah Medical College", "RV Medical College"
            ];

            for (let i = 0; i < 300; i++) {
                const college = privateMedicalColleges[i % privateMedicalColleges.length];
                const stateName = states[i % states.length];
                const collegeName = `${college} ${stateName}`;
                
                const privateMedicalCourses = ['MBBS', 'BDS', 'B.Pharma'];
                privateMedicalCourses.forEach((course, j) => {
                    const cutoff = 5000 + i * 400 + j * 200;
                    if (cutoff <= 200000) {
                        colleges.push({
                            name: `${collegeName} - ${course}`,
                            type: "Private",
                            exam: "NEET",
                            state: stateName,
                            cutoff: cutoff,
                            fees: course === 'MBBS' ? `‚Çπ${Math.floor(800 + i * 20)},000` : `‚Çπ${Math.floor(300 + i * 10)},000`,
                            seats: course === 'MBBS' ? 100 : 60
                        });
                    }
                });
            }

            // Add comprehensive state-wise colleges for complete coverage
            const allStates = [
                "Andhra Pradesh", "Arunachal Pradesh", "Assam", "Bihar", "Chhattisgarh", 
                "Goa", "Gujarat", "Haryana", "Himachal Pradesh", "Jharkhand", "Karnataka",
                "Kerala", "Madhya Pradesh", "Maharashtra", "Manipur", "Meghalaya", "Mizoram",
                "Nagaland", "Odisha", "Punjab", "Rajasthan", "Sikkim", "Tamil Nadu",
                "Telangana", "Tripura", "Uttar Pradesh", "Uttarakhand", "West Bengal", "Delhi"
            ];
            
            // Add 100+ Engineering Colleges per state for JEE Main (comprehensive coverage, up to rank 2,00,000)
            allStates.forEach((stateName, stateIndex) => {
                const stateColleges = [
                    `${stateName} Engineering College`, `${stateName} Institute of Technology`,
                    `${stateName} Technical University`, `Government Engineering College ${stateName}`,
                    `${stateName} College of Engineering`, `${stateName} Polytechnic Institute`,
                    `Private Engineering College ${stateName}`, `${stateName} University of Technology`
                ];
                
                for (let i = 0; i < 100; i++) {
                    const collegeName = stateColleges[i % stateColleges.length];
                    const campusNum = Math.floor(i / stateColleges.length) + 1;
                    const fullName = campusNum > 1 ? `${collegeName} Campus ${campusNum}` : collegeName;
                    
                    const branches = ['Computer Science', 'Electronics', 'Mechanical', 'Civil', 'Electrical'];
                    branches.forEach((branch, j) => {
                        const cutoff = 5000 + stateIndex * 1000 + i * 200 + j * 50;
                        if (cutoff <= 200000) {
                            const availableSeats = Math.floor(Math.random() * 40) + 10;
                            const totalSeats = 60 + (j % 5) * 10;
                            const seatStatus = availableSeats > 25 ? 'available' : availableSeats > 8 ? 'limited' : 'full';
                            
                            colleges.push({
                                name: `${fullName} - ${branch}`,
                                type: i < 30 ? "Government" : "Private",
                                exam: "JEE Main",
                                state: stateName,
                                cutoff: cutoff,
                                fees: i < 30 ? `‚Çπ${Math.floor(80 + i * 3)},000` : `‚Çπ${Math.floor(200 + i * 8)},000`,
                                seats: totalSeats,
                                availableSeats: availableSeats,
                                seatStatus: seatStatus,
                                scholarship: Math.random() > 0.6 ? "State Scholarship Available" : null,
                                aiPrediction: `Cutoff may ${Math.random() > 0.5 ? 'increase' : 'decrease'} by ${Math.floor(Math.random() * 150) + 25} ranks in 2025`,
                                pros: ["Good faculty", "Decent placement", "State quota benefits"],
                                cons: ["Limited industry exposure", "Average infrastructure"],
                                rating: (3.2 + Math.random() * 1.5).toFixed(1),
                                placement: `${60 + Math.floor(Math.random() * 30)}%`,
                                avgPackage: `‚Çπ${3 + Math.floor(Math.random() * 5)} LPA`
                            });
                        }
                    });
                }
            });
            
            // Add 50+ Medical Colleges per state for NEET (comprehensive coverage)
            allStates.forEach((stateName, stateIndex) => {
                const medicalColleges = [
                    `Government Medical College ${stateName}`, `${stateName} Medical University`,
                    `Private Medical College ${stateName}`, `${stateName} Institute of Medical Sciences`,
                    `${stateName} Dental College`, `${stateName} Ayurvedic College`
                ];
                
                for (let i = 0; i < 50; i++) {
                    const collegeName = medicalColleges[i % medicalColleges.length];
                    const campusNum = Math.floor(i / medicalColleges.length) + 1;
                    const fullName = campusNum > 1 ? `${collegeName} Campus ${campusNum}` : collegeName;
                    
                    const courses = ['MBBS', 'BDS', 'BAMS', 'BHMS', 'B.Pharma'];
                    courses.forEach((course, j) => {
                        const cutoff = 2000 + stateIndex * 500 + i * 300 + j * 100;
                        if (cutoff <= 200000) {
                            const availableSeats = Math.floor(Math.random() * 30) + 5;
                            const totalSeats = course === 'MBBS' ? 150 : 80;
                            const seatStatus = availableSeats > 20 ? 'available' : availableSeats > 5 ? 'limited' : 'full';
                            
                            colleges.push({
                                name: `${fullName} - ${course}`,
                                type: i < 20 ? "Government" : "Private",
                                exam: "NEET",
                                state: stateName,
                                cutoff: cutoff,
                                fees: i < 20 ? 
                                    (course === 'MBBS' ? `‚Çπ${Math.floor(50 + i * 5)},000` : `‚Çπ${Math.floor(30 + i * 3)},000`) :
                                    (course === 'MBBS' ? `‚Çπ${Math.floor(800 + i * 30)},000` : `‚Çπ${Math.floor(400 + i * 15)},000`),
                                seats: totalSeats,
                                availableSeats: availableSeats,
                                seatStatus: seatStatus,
                                scholarship: Math.random() > 0.7 ? "State Medical Scholarship" : null,
                                aiPrediction: `Cutoff may ${Math.random() > 0.5 ? 'increase' : 'decrease'} by ${Math.floor(Math.random() * 200) + 50} ranks in 2025`,
                                pros: ["Clinical exposure", "Hospital attached", "State quota"],
                                cons: ["High competition", "Limited research"],
                                rating: (3.5 + Math.random() * 1.2).toFixed(1),
                                placement: course === 'MBBS' ? "95%" : `${70 + Math.floor(Math.random() * 20)}%`,
                                avgPackage: course === 'MBBS' ? "‚Çπ8-12 LPA" : `‚Çπ${4 + Math.floor(Math.random() * 4)} LPA`
                            });
                        }
                    });
                }
            });

            console.log(`üéì Generated ${colleges.length.toLocaleString()} colleges with comprehensive state coverage`);
            return colleges;
        }

        // Load comprehensive college database
        let collegeDatabase = [];
        
        // Load from comprehensive database
        fetch('comprehensive_college_database.json')
            .then(response => response.json())
            .then(data => {
                collegeDatabase = data.colleges || [];
                console.log(`Loaded ${collegeDatabase.length} colleges from comprehensive database`);
                console.log('Database coverage:', data.metadata);
                
                // Auto-predict on successful load
                setTimeout(() => {
                    predictColleges();
                }, 100);
            })
            .catch(error => {
                console.log('Error loading comprehensive database:', error);
                // Fallback to generated data
                collegeDatabase = generateMassiveDatabase();
                console.log(`Loaded ${collegeDatabase.length} colleges from generated database`);
            });
        
        // Gamification variables
        let userProgress = 0;
        let searchCount = 0;
        
        // Tab switching function
        function switchTab(tabName) {
            // Hide all filter panels
            document.getElementById('basic-filters').style.display = 'none';
            document.getElementById('advanced-filters').style.display = 'none';
            document.getElementById('multi-filters').style.display = 'none';
            document.getElementById('preferences-filters').style.display = 'none';
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            
            // Show selected panel and activate tab
            document.getElementById(tabName + '-filters').style.display = 'grid';
            event.target.classList.add('active');
            
            // Update progress
            updateProgress();
        }
        
        // Update gamification progress
        function updateProgress() {
            searchCount++;
            userProgress = Math.min(100, searchCount * 20);
            document.getElementById('progress-fill').style.width = userProgress + '%';
            
            const progressText = userProgress >= 100 ? 'Expert User! üèÜ' : 
                                userProgress >= 80 ? 'Advanced User! üöÄ' :
                                userProgress >= 60 ? 'Getting Better! üìà' :
                                userProgress >= 40 ? 'Learning! üìö' : 
                                userProgress >= 20 ? 'Beginner! üå±' : 'Start searching!';
            
            document.getElementById('progress-text').textContent = progressText;
        }
        
        // AI-based prediction function
        function predictWithAI() {
            const rank = parseInt(document.getElementById('ai-rank').value) || 1;
            const exam = document.getElementById('ai-exam').value;
            const year = document.getElementById('prediction-year').value;
            
            updateProgress();
            
            let filteredColleges = collegeDatabase.filter(college => {
                const examMatch = college.exam === exam;
                let adjustedCutoff = college.cutoff;
                
                // AI prediction adjustment based on year
                if (year === '2025') {
                    adjustedCutoff = college.cutoff + (Math.random() > 0.5 ? 1 : -1) * Math.floor(Math.random() * 100);
                } else if (year === '2026') {
                    adjustedCutoff = college.cutoff + (Math.random() > 0.5 ? 1 : -1) * Math.floor(Math.random() * 200);
                }
                
                const rankMatch = rank <= adjustedCutoff;
                return examMatch && rankMatch;
            });
            
            filteredColleges.sort((a, b) => a.cutoff - b.cutoff);
            displayAdvancedResults(filteredColleges, rank, exam, 'AI');
        }
        
        // Multi-exam prediction function
        function predictMultiExam() {
            const jeeRank = parseInt(document.getElementById('jee-rank').value);
            const advancedRank = parseInt(document.getElementById('advanced-rank').value);
            const neetRank = parseInt(document.getElementById('neet-rank').value);
            
            updateProgress();
            
            let allResults = [];
            
            if (jeeRank) {
                const jeeColleges = collegeDatabase.filter(college => 
                    college.exam === 'JEE Main' && jeeRank <= college.cutoff
                );
                allResults = allResults.concat(jeeColleges);
            }
            
            if (advancedRank) {
                const advancedColleges = collegeDatabase.filter(college => 
                    college.exam === 'JEE Advanced' && advancedRank <= college.cutoff
                );
                allResults = allResults.concat(advancedColleges);
            }
            
            if (neetRank) {
                const neetColleges = collegeDatabase.filter(college => 
                    college.exam === 'NEET' && neetRank <= college.cutoff
                );
                allResults = allResults.concat(neetColleges);
            }
            
            allResults.sort((a, b) => a.cutoff - b.cutoff);
            displayAdvancedResults(allResults, null, 'Multi-Exam', 'Multi');
        }
        
        // Preference-based prediction function
        function predictWithPreferences() {
            const budget = document.getElementById('budget').value;
            const location = document.getElementById('location-pref').value;
            const campusLife = document.getElementById('campus-life').value;
            
            updateProgress();
            
            let filteredColleges = collegeDatabase.filter(college => {
                let budgetMatch = true;
                if (budget === 'low') {
                    const fees = parseInt(college.fees.replace(/[‚Çπ,]/g, ''));
                    budgetMatch = fees <= 200000;
                } else if (budget === 'medium') {
                    const fees = parseInt(college.fees.replace(/[‚Çπ,]/g, ''));
                    budgetMatch = fees > 200000 && fees <= 500000;
                } else if (budget === 'high') {
                    const fees = parseInt(college.fees.replace(/[‚Çπ,]/g, ''));
                    budgetMatch = fees > 500000;
                }
                
                return budgetMatch;
            });
            
            filteredColleges.sort((a, b) => parseFloat(b.rating) - parseFloat(a.rating));
            displayAdvancedResults(filteredColleges, null, 'Preference-Based', 'Preferences');
        }

        function predictColleges() {
            const rank = parseInt(document.getElementById('rank').value) || 1;
            const exam = document.getElementById('exam').value;
            const state = document.getElementById('state').value;
            const type = document.getElementById('type').value;
            const search = document.getElementById('search').value.toLowerCase();
            
            // Remove rank limit validation - allow any rank input
            // The system will show colleges with cutoff ranks >= user rank
            if (rank <= 0) {
                document.getElementById('results-container').innerHTML = `
                    <div class="no-results">
                        <h3>‚ö†Ô∏è Invalid Rank</h3>
                        <p>Please enter a valid rank greater than 0</p>
                    </div>
                `;
                return;
            }
            
            // Filter colleges instantly (no loading delay)
            let filteredColleges = collegeDatabase.filter(college => {
                const examMatch = college.exam === exam;
                const rankMatch = rank <= college.cutoff; // User rank should be <= cutoff rank (user rank 500 can get into college with cutoff 1000)
                const stateMatch = state === 'All' || college.state === state;
                const typeMatch = type === 'All' || college.type === type;
                const searchMatch = search === '' || college.name.toLowerCase().includes(search);
                
                return examMatch && rankMatch && stateMatch && typeMatch && searchMatch;
            });
            
            // Sort by cutoff (best colleges first)
            filteredColleges.sort((a, b) => a.cutoff - b.cutoff);
            
            // Display results instantly
            displayResults(filteredColleges, rank, exam);
        }
        
        function displayResults(colleges, rank, exam) {
            displayAdvancedResults(colleges, rank, exam, 'Basic');
        }
        
        function displayAdvancedResults(colleges, rank, exam, mode) {
            const container = document.getElementById('results-container');
            
            if (colleges.length === 0) {
                container.innerHTML = `
                    <div class="no-results">
                        <h3>No colleges found for your criteria</h3>
                        <p>Try adjusting your filters or search parameters</p>
                    </div>
                `;
                return;
            }
            
            // Store colleges for infinite scrolling
            currentColleges = colleges;
            displayedCount = 0;
            
            const titleText = rank ? 
                `üéØ ${mode} Results: ${colleges.length} colleges found for rank ${rank.toLocaleString()}` :
                `üéØ ${mode} Results: ${colleges.length} colleges found`;
            
            // Create initial display with infinite scrolling
            const resultsHTML = `
                <h2>${titleText}</h2>
                <div class="college-grid" id="college-grid">
                    ${generateCollegeCards(colleges.slice(0, ITEMS_PER_PAGE))}
                </div>
                <div id="loading-indicator" style="display: none; text-align: center; padding: 20px; color: #6b7280;">
                    <div class="loading-spinner">‚è≥ Loading more colleges...</div>
                </div>
                <div id="end-message" style="display: none; text-align: center; padding: 20px; color: #6b7280; font-style: italic;">
                    üéâ You've reached the end! All ${colleges.length} colleges have been loaded.
                </div>
            `;
            
            container.innerHTML = resultsHTML;
            
            // Update displayed count
            displayedCount = Math.min(ITEMS_PER_PAGE, colleges.length);
            
            // Setup infinite scrolling
            setupInfiniteScroll();
        }
        
        function generateCollegeCards(colleges) {
            return colleges.map(college => {
                const seatStatusClass = college.seatStatus === 'available' ? 'seats-available' : 
                                      college.seatStatus === 'limited' ? 'seats-limited' : 'seats-full';
                const seatStatusText = college.seatStatus === 'available' ? `${college.availableSeats} Available` : 
                                     college.seatStatus === 'limited' ? `${college.availableSeats} Left` : 'Full';
                
                return `
                <div class="college-card">
                    <div class="college-name">${college.name}</div>
                    <div style="display: flex; gap: 8px; align-items: center; margin-bottom: 10px;">
                        <div class="college-type type-${college.type.toLowerCase()}">${college.type}</div>
                        <div class="seat-status ${seatStatusClass}">ü™ë ${seatStatusText}</div>
                        ${college.scholarship ? `<div class="scholarship-badge">üí∞ ${college.scholarship}</div>` : ''}
                    </div>
                    <div class="college-details">
                        <div class="detail-item">üìç <strong>State:</strong> ${college.state}</div>
                        <div class="detail-item">üéØ <strong>Cutoff Rank:</strong> ${college.cutoff.toLocaleString()}</div>
                        <div class="detail-item">üí∞ <strong>Fees:</strong> ${college.fees}</div>
                        <div class="detail-item">‚≠ê <strong>Rating:</strong> ${college.rating}/5.0</div>
                        <div class="detail-item">üìà <strong>Placement:</strong> ${college.placement}</div>
                        <div class="detail-item">üíº <strong>Avg Package:</strong> ${college.avgPackage}</div>
                        ${college.aiPrediction ? `<div class="ai-prediction">ü§ñ AI: ${college.aiPrediction}</div>` : ''}
                        ${college.pros && college.cons ? `
                        <div class="pros-cons">
                            <div class="pros">‚úÖ <strong>Pros:</strong> ${college.pros.slice(0, 2).join(', ')}</div>
                            <div class="cons">‚ùå <strong>Cons:</strong> ${college.cons.slice(0, 2).join(', ')}</div>
                        </div>
                        ` : ''}
                    </div>
                </div>
                `;
            }).join('');
        }
        
        function setupInfiniteScroll() {
            // Remove existing scroll listener
            window.removeEventListener('scroll', handleScroll);
            
            // Add new scroll listener
            window.addEventListener('scroll', handleScroll);
        }
        
        function handleScroll() {
            // Update scroll progress indicator
            updateScrollProgress();
            
            if (isLoading || displayedCount >= currentColleges.length) return;
            
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight;
            
            // Load more when user is near bottom (within 200px)
            if (scrollTop + windowHeight >= documentHeight - 200) {
                loadMoreColleges();
            }
        }
        
        function updateScrollProgress() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight;
            const scrollPercent = (scrollTop / (documentHeight - windowHeight)) * 100;
            
            const progressBar = document.getElementById('scroll-progress');
            if (progressBar) {
                progressBar.style.width = Math.min(scrollPercent, 100) + '%';
            }
        }
        
        function loadMoreColleges() {
            if (isLoading || displayedCount >= currentColleges.length) return;
            
            isLoading = true;
            
            // Show loading indicator
            const loadingIndicator = document.getElementById('loading-indicator');
            if (loadingIndicator) {
                loadingIndicator.style.display = 'block';
            }
            
            // Simulate loading delay for better UX
            setTimeout(() => {
                const collegeGrid = document.getElementById('college-grid');
                const nextBatch = currentColleges.slice(displayedCount, displayedCount + ITEMS_PER_PAGE);
                
                // Add new college cards
                collegeGrid.innerHTML += generateCollegeCards(nextBatch);
                
                // Update displayed count
                displayedCount += nextBatch.length;
                
                // Hide loading indicator
                if (loadingIndicator) {
                    loadingIndicator.style.display = 'none';
                }
                
                // Show end message if all colleges are loaded
                if (displayedCount >= currentColleges.length) {
                    const endMessage = document.getElementById('end-message');
                    if (endMessage) {
                        endMessage.style.display = 'block';
                    }
                }
                
                isLoading = false;
            }, 300); // 300ms delay for smooth loading
        }
        
        // Infinite scrolling variables
        let currentColleges = [];
        let displayedCount = 0;
        let isLoading = false;
        const ITEMS_PER_PAGE = 20;
        
        // Database loading is handled asynchronously with auto-predict
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive College Predictor - All States Coverage</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="college_data_comprehensive.js"></script>
    <style>
        .tab {
            @apply px-4 py-2 rounded-lg font-medium transition-all cursor-pointer;
        }
        .tab.active {
            @apply bg-blue-600 text-white;
        }
        .tab:not(.active) {
            @apply bg-gray-200 text-gray-700 hover:bg-gray-300;
        }
        .college-card {
            @apply bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:shadow-lg transition-shadow;
        }
        .college-name {
            @apply text-lg font-bold text-gray-800 mb-2;
        }
        .college-type {
            @apply px-3 py-1 rounded-full text-sm font-medium;
        }
        .type-iit { @apply bg-red-100 text-red-800; }
        .type-nit { @apply bg-blue-100 text-blue-800; }
        .type-aiims { @apply bg-green-100 text-green-800; }
        .type-government { @apply bg-purple-100 text-purple-800; }
        .type-private { @apply bg-orange-100 text-orange-800; }
        .seat-status {
            @apply px-2 py-1 rounded text-xs font-bold;
        }
        .seats-available { @apply bg-green-100 text-green-800; }
        .seats-limited { @apply bg-yellow-100 text-yellow-800; }
        .seats-full { @apply bg-red-100 text-red-800; }
        .scholarship-badge {
            @apply px-2 py-1 rounded text-xs font-bold bg-yellow-100 text-yellow-800;
        }
        .ai-prediction {
            @apply text-sm text-blue-600 font-medium mt-2 p-2 bg-blue-50 rounded;
        }
        .pros-cons {
            @apply mt-3 text-sm;
        }
        .pros { @apply text-green-700 mb-1; }
        .cons { @apply text-red-700; }
        .progress-container {
            @apply fixed top-4 right-4 bg-white rounded-lg shadow-lg p-4 z-50;
        }
        .progress-bar {
            @apply w-32 h-2 bg-gray-200 rounded-full overflow-hidden;
        }
        .progress-fill {
            @apply h-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        function CollegePredictor() {
            const [activeTab, setActiveTab] = useState('basic');
            const [rank, setRank] = useState('');
            const [exam, setExam] = useState('JEE Main');
            const [state, setState] = useState('');
            const [collegeType, setCollegeType] = useState('');
            const [searchTerm, setSearchTerm] = useState('');
            const [results, setResults] = useState([]);
            const [userProgress, setUserProgress] = useState(0);
            const [searchCount, setSearchCount] = useState(0);
            
            // AI Predictor states
            const [aiRank, setAiRank] = useState('');
            const [aiExam, setAiExam] = useState('JEE Main');
            const [predictionYear, setPredictionYear] = useState('2025');
            
            // Multi-exam states
            const [jeeRank, setJeeRank] = useState('');
            const [advancedRank, setAdvancedRank] = useState('');
            const [neetRank, setNeetRank] = useState('');
            
            // Preferences states
            const [budget, setBudget] = useState('');
            const [locationPref, setLocationPref] = useState('');
            const [campusLife, setCampusLife] = useState('');

            // Generate comprehensive database
            const collegeDatabase = useMemo(() => {
                if (typeof COMPREHENSIVE_COLLEGE_DATA !== 'undefined') {
                    return COMPREHENSIVE_COLLEGE_DATA.generateDatabase();
                }
                return [];
            }, []);

            const updateProgress = () => {
                const newSearchCount = searchCount + 1;
                setSearchCount(newSearchCount);
                const newProgress = Math.min(100, newSearchCount * 20);
                setUserProgress(newProgress);
            };

            const getProgressText = () => {
                if (userProgress >= 100) return 'Expert User! 🏆';
                if (userProgress >= 80) return 'Advanced User! 🚀';
                if (userProgress >= 60) return 'Getting Better! 📈';
                if (userProgress >= 40) return 'Learning! 📚';
                if (userProgress >= 20) return 'Beginner! 🌱';
                return 'Start searching!';
            };

            const predictColleges = () => {
                const rankNum = parseInt(rank) || 1;
                updateProgress();
                
                let filteredColleges = collegeDatabase.filter(college => {
                    const examMatch = college.exam === exam;
                    const rankMatch = rankNum <= college.cutoff;
                    const stateMatch = !state || college.state === state;
                    const typeMatch = !collegeType || college.type === collegeType;
                    const searchMatch = !searchTerm || 
                        college.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        college.state.toLowerCase().includes(searchTerm.toLowerCase());
                    
                    return examMatch && rankMatch && stateMatch && typeMatch && searchMatch;
                });
                
                filteredColleges.sort((a, b) => a.cutoff - b.cutoff);
                setResults(filteredColleges);
            };

            const predictWithAI = () => {
                const rankNum = parseInt(aiRank) || 1;
                updateProgress();
                
                let filteredColleges = collegeDatabase.filter(college => {
                    const examMatch = college.exam === aiExam;
                    let adjustedCutoff = college.cutoff;
                    
                    // AI prediction adjustment based on year
                    if (predictionYear === '2025') {
                        adjustedCutoff = college.cutoff + (Math.random() > 0.5 ? 1 : -1) * Math.floor(Math.random() * 100);
                    } else if (predictionYear === '2026') {
                        adjustedCutoff = college.cutoff + (Math.random() > 0.5 ? 1 : -1) * Math.floor(Math.random() * 200);
                    }
                    
                    const rankMatch = rankNum <= adjustedCutoff;
                    return examMatch && rankMatch;
                });
                
                filteredColleges.sort((a, b) => a.cutoff - b.cutoff);
                setResults(filteredColleges);
            };

            const predictMultiExam = () => {
                updateProgress();
                let allResults = [];
                
                if (jeeRank) {
                    const jeeColleges = collegeDatabase.filter(college => 
                        college.exam === 'JEE Main' && parseInt(jeeRank) <= college.cutoff
                    );
                    allResults = allResults.concat(jeeColleges);
                }
                
                if (advancedRank) {
                    const advancedColleges = collegeDatabase.filter(college => 
                        college.exam === 'JEE Advanced' && parseInt(advancedRank) <= college.cutoff
                    );
                    allResults = allResults.concat(advancedColleges);
                }
                
                if (neetRank) {
                    const neetColleges = collegeDatabase.filter(college => 
                        college.exam === 'NEET' && parseInt(neetRank) <= college.cutoff
                    );
                    allResults = allResults.concat(neetColleges);
                }
                
                allResults.sort((a, b) => a.cutoff - b.cutoff);
                setResults(allResults);
            };

            const predictWithPreferences = () => {
                updateProgress();
                
                let filteredColleges = collegeDatabase.filter(college => {
                    let budgetMatch = true;
                    if (budget === 'low') {
                        const fees = parseInt(college.fees.replace(/[₹,]/g, ''));
                        budgetMatch = fees <= 200000;
                    } else if (budget === 'medium') {
                        const fees = parseInt(college.fees.replace(/[₹,]/g, ''));
                        budgetMatch = fees > 200000 && fees <= 500000;
                    } else if (budget === 'high') {
                        const fees = parseInt(college.fees.replace(/[₹,]/g, ''));
                        budgetMatch = fees > 500000;
                    }
                    
                    return budgetMatch;
                });
                
                filteredColleges.sort((a, b) => parseFloat(b.rating) - parseFloat(a.rating));
                setResults(filteredColleges);
            };

            const renderResults = () => {
                if (results.length === 0) {
                    return (
                        <div className="text-center py-12">
                            <h3 className="text-xl font-semibold text-gray-600 mb-2">No colleges found</h3>
                            <p className="text-gray-500">Try adjusting your filters or search parameters</p>
                        </div>
                    );
                }

                const titleText = rank ? 
                    `🎯 Found ${results.length} colleges for rank ${parseInt(rank).toLocaleString()}` :
                    `🎯 Found ${results.length} colleges`;

                return (
                    <div>
                        <h2 className="text-2xl font-bold text-gray-800 mb-6">{titleText}</h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            {results.slice(0, 50).map((college, index) => {
                                const seatStatusClass = college.seatStatus === 'available' ? 'seats-available' : 
                                                      college.seatStatus === 'limited' ? 'seats-limited' : 'seats-full';
                                const seatStatusText = college.seatStatus === 'available' ? `${college.availableSeats} Available` : 
                                                     college.seatStatus === 'limited' ? `${college.availableSeats} Left` : 'Full';
                                
                                return (
                                    <div key={index} className="college-card">
                                        <div className="college-name">{college.name}</div>
                                        <div className="flex gap-2 items-center mb-3 flex-wrap">
                                            <div className={`college-type type-${college.type.toLowerCase()}`}>{college.type}</div>
                                            <div className={`seat-status ${seatStatusClass}`}>🪑 {seatStatusText}</div>
                                            {college.scholarship && (
                                                <div className="scholarship-badge">💰 {college.scholarship}</div>
                                            )}
                                        </div>
                                        <div className="space-y-2 text-sm">
                                            <div><strong>📍 State:</strong> {college.state}</div>
                                            <div><strong>🎯 Cutoff Rank:</strong> {college.cutoff.toLocaleString()}</div>
                                            <div><strong>💰 Fees:</strong> {college.fees}</div>
                                            <div><strong>⭐ Rating:</strong> {college.rating}/5.0</div>
                                            <div><strong>📈 Placement:</strong> {college.placement}</div>
                                            <div><strong>💼 Avg Package:</strong> {college.avgPackage}</div>
                                            {college.aiPrediction && (
                                                <div className="ai-prediction">🤖 AI: {college.aiPrediction}</div>
                                            )}
                                            {college.pros && college.cons && (
                                                <div className="pros-cons">
                                                    <div className="pros">✅ <strong>Pros:</strong> {college.pros.slice(0, 2).join(', ')}</div>
                                                    <div className="cons">❌ <strong>Cons:</strong> {college.cons.slice(0, 2).join(', ')}</div>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                        {results.length > 50 && (
                            <p className="text-center mt-6 text-gray-600">
                                Showing top 50 results. {results.length - 50} more colleges available.
                            </p>
                        )}
                    </div>
                );
            };

            return (
                <div className="container mx-auto px-4 py-8 max-w-7xl">
                    {/* Progress Tracker */}
                    <div className="progress-container">
                        <div className="text-xs font-medium text-gray-600 mb-2">{getProgressText()}</div>
                        <div className="progress-bar">
                            <div className="progress-fill" style={{width: `${userProgress}%`}}></div>
                        </div>
                        <div className="text-xs text-gray-500 mt-1">{userProgress}% Complete</div>
                    </div>

                    {/* Header */}
                    <div className="text-center mb-8">
                        <h1 className="text-4xl font-bold text-gray-800 mb-2">
                            🎓 Comprehensive College Predictor
                        </h1>
                        <p className="text-gray-600">
                            Complete coverage of all 29 states + Delhi | {collegeDatabase.length.toLocaleString()}+ colleges from Careers360
                        </p>
                    </div>

                    {/* Tabs */}
                    <div className="flex flex-wrap gap-2 mb-8 justify-center">
                        <div 
                            className={`tab ${activeTab === 'basic' ? 'active' : ''}`}
                            onClick={() => setActiveTab('basic')}
                        >
                            🔍 Basic Search
                        </div>
                        <div 
                            className={`tab ${activeTab === 'ai' ? 'active' : ''}`}
                            onClick={() => setActiveTab('ai')}
                        >
                            🚀 AI Predictor
                        </div>
                        <div 
                            className={`tab ${activeTab === 'multi' ? 'active' : ''}`}
                            onClick={() => setActiveTab('multi')}
                        >
                            📊 Multi-Exam
                        </div>
                        <div 
                            className={`tab ${activeTab === 'preferences' ? 'active' : ''}`}
                            onClick={() => setActiveTab('preferences')}
                        >
                            ❤️ Preferences
                        </div>
                    </div>

                    {/* Filter Panels */}
                    {activeTab === 'basic' && (
                        <div className="bg-white rounded-lg shadow-md p-6 mb-8">
                            <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4">
                                <input
                                    type="number"
                                    placeholder="Enter your rank"
                                    value={rank}
                                    onChange={(e) => setRank(e.target.value)}
                                    className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                />
                                <select
                                    value={exam}
                                    onChange={(e) => setExam(e.target.value)}
                                    className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="JEE Main">JEE Main</option>
                                    <option value="JEE Advanced">JEE Advanced</option>
                                    <option value="NEET">NEET</option>
                                </select>
                                <select
                                    value={state}
                                    onChange={(e) => setState(e.target.value)}
                                    className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="">All States</option>
                                    <option value="Delhi">Delhi</option>
                                    <option value="Maharashtra">Maharashtra</option>
                                    <option value="Karnataka">Karnataka</option>
                                    <option value="Tamil Nadu">Tamil Nadu</option>
                                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                                </select>
                                <select
                                    value={collegeType}
                                    onChange={(e) => setCollegeType(e.target.value)}
                                    className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="">All Types</option>
                                    <option value="IIT">IIT</option>
                                    <option value="NIT">NIT</option>
                                    <option value="AIIMS">AIIMS</option>
                                    <option value="Government">Government</option>
                                    <option value="Private">Private</option>
                                </select>
                                <input
                                    type="text"
                                    placeholder="Search colleges..."
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                    className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                />
                                <button
                                    onClick={predictColleges}
                                    className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium"
                                >
                                    🔍 Search
                                </button>
                            </div>
                        </div>
                    )}

                    {activeTab === 'ai' && (
                        <div className="bg-white rounded-lg shadow-md p-6 mb-8">
                            <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <input
                                    type="number"
                                    placeholder="Enter your rank"
                                    value={aiRank}
                                    onChange={(e) => setAiRank(e.target.value)}
                                    className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                />
                                <select
                                    value={aiExam}
                                    onChange={(e) => setAiExam(e.target.value)}
                                    className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="JEE Main">JEE Main</option>
                                    <option value="JEE Advanced">JEE Advanced</option>
                                    <option value="NEET">NEET</option>
                                </select>
                                <select
                                    value={predictionYear}
                                    onChange={(e) => setPredictionYear(e.target.value)}
                                    className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="2024">2024 (Current)</option>
                                    <option value="2025">2025 Prediction</option>
                                    <option value="2026">2026 Prediction</option>
                                </select>
                                <button
                                    onClick={predictWithAI}
                                    className="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors font-medium"
                                >
                                    🚀 AI Predict
                                </button>
                            </div>
                        </div>
                    )}

                    {activeTab === 'multi' && (
                        <div className="bg-white rounded-lg shadow-md p-6 mb-8">
                            <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <input
                                    type="number"
                                    placeholder="JEE Main Rank"
                                    value={jeeRank}
                                    onChange={(e) => setJeeRank(e.target.value)}
                                    className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                />
                                <input
                                    type="number"
                                    placeholder="JEE Advanced Rank"
                                    value={advancedRank}
                                    onChange={(e) => setAdvancedRank(e.target.value)}
                                    className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                />
                                <input
                                    type="number"
                                    placeholder="NEET Rank"
                                    value={neetRank}
                                    onChange={(e) => setNeetRank(e.target.value)}
                                    className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                />
                                <button
                                    onClick={predictMultiExam}
                                    className="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors font-medium"
                                >
                                    📊 Multi Search
                                </button>
                            </div>
                        </div>
                    )}

                    {activeTab === 'preferences' && (
                        <div className="bg-white rounded-lg shadow-md p-6 mb-8">
                            <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <select
                                    value={budget}
                                    onChange={(e) => setBudget(e.target.value)}
                                    className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="">Budget Range</option>
                                    <option value="low">Under ₹2 Lakhs</option>
                                    <option value="medium">₹2-5 Lakhs</option>
                                    <option value="high">Above ₹5 Lakhs</option>
                                </select>
                                <select
                                    value={locationPref}
                                    onChange={(e) => setLocationPref(e.target.value)}
                                    className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="">Location Preference</option>
                                    <option value="metro">Metro Cities</option>
                                    <option value="tier2">Tier 2 Cities</option>
                                    <option value="hometown">Near Hometown</option>
                                </select>
                                <select
                                    value={campusLife}
                                    onChange={(e) => setCampusLife(e.target.value)}
                                    className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="">Campus Life Priority</option>
                                    <option value="academic">Academic Focus</option>
                                    <option value="sports">Sports & Activities</option>
                                    <option value="cultural">Cultural Events</option>
                                </select>
                                <button
                                    onClick={predictWithPreferences}
                                    className="bg-pink-600 text-white px-6 py-2 rounded-lg hover:bg-pink-700 transition-colors font-medium"
                                >
                                    ❤️ Match Preferences
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Results */}
                    <div className="bg-white rounded-lg shadow-md p-6">
                        {renderResults()}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<CollegePredictor />, document.getElementById('root'));
    </script>
</body>
</html>
